!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Editor=e()}(this,function(){"use strict";function t(t){return"string"==typeof t?document.querySelector(t):t}var e=function(e,n){void 0===n&&(n={}),this.el=t(e),this.init()};return e.prototype.init=function(){this.initStyler(),this.initStylerActions(),this.initEditor()},e.prototype.initEditor=function(){var t=this;this.el.contentEditable="true";var e=document.createElement("p");e.innerText="Type here",this.el.appendChild(e),this.el.addEventListener("focus",function(){t.styler.wrapper.classList.add("is-visiable")}),this.el.addEventListener("click",function(){t.updateStylerStates()})},e.prototype.initStyler=function(){this.styler={},this.el.insertAdjacentHTML("beforebegin",'\n  <ul class="styler">\n    <li>\n      <select class="styler-select" id="formating">\n        <option selected>formatting</option>\n        <option value="h1">Title 1</option>\n        <option value="h2">Title 2</option>\n        <option value="h3">Title 3</option>\n        <option value="h4">Title 4</option>\n        <option value="h5">Title 5</option>\n        <option value="h6">Title 6</option>\n        <option value="p">Paragraph</option>\n        <option value="pre">Preformatted</option>\n      </select>\n    </li>\n    <li>\n      <select class="styler-select" id="size">\n        <option selected>\n          size\n        </option>\n        <option value="1">1</option>\n        <option value="2">2</option>\n        <option value="3">3</option>\n        <option value="4">4</option>\n        <option value="5">5</option>\n        <option value="6">6</option>\n        <option value="7">7</option>\n      </select>\n    </li>\n    <li>\n      <input class="styler-color" id="color" type="color"/>\n    </li>\n    <li class="styler-separator"></li>\n    <li>\n      <button class="styler-button" id="bold">\n        <svg class="icon">\n          <use xlink:href="dist/svg/symbols.svg#icon-bold"></use>\n        </svg>\n      </button>\n    </li>\n    <li>\n      <button class="styler-button" id="italic">\n        <svg class="icon">\n          <use xlink:href="dist/svg/symbols.svg#icon-italic"></use>\n        </svg>\n      </button>\n    </li>\n    <li>\n      <button class="styler-button" id="underline">\n        <svg class="icon">\n          <use xlink:href="dist/svg/symbols.svg#icon-underline"></use>\n        </svg>\n      </button>\n    </li>\n    <li class="styler-separator"></li>\n    <li>\n      <button class="styler-button" id="justifyLeft">\n        <svg class="icon">\n          <use xlink:href="dist/svg/symbols.svg#icon-justifyLeft"></use>\n        </svg>\n      </button>\n    </li>\n    <li>\n      <button class="styler-button" id="justifyCenter">\n        <svg class="icon">\n          <use xlink:href="dist/svg/symbols.svg#icon-justifyCenter"></use>\n        </svg>\n      </button>\n    </li>\n    <li>\n      <button class="styler-button" id="justifyRight">\n        <svg class="icon">\n          <use xlink:href="dist/svg/symbols.svg#icon-justifyRight"></use>\n        </svg>\n      </button>\n    </li>\n    <li>\n      <button class="styler-button" id="justifyFull">\n        <svg class="icon">\n          <use xlink:href="dist/svg/symbols.svg#icon-justifyFull"></use>\n        </svg>\n      </button>\n    </li>\n    <li class="styler-separator"></li>    \n    <li>\n      <button class="styler-button">\n        <input class="styler-input" type="file" id="addImage">\n        <svg class="icon">\n          <use xlink:href="dist/svg/symbols.svg#icon-image"></use>\n        </svg>\n      </button>\n    </li>\n  </ul>\n'),this.styler.wrapper=t(".styler"),this.styler.formating=t("#formating"),this.styler.size=t("#size"),this.styler.color=t("#color"),this.styler.bold=t("#bold"),this.styler.italic=t("#italic"),this.styler.underline=t("#underline"),this.styler.justifyLeft=t("#justifyLeft"),this.styler.justifyCenter=t("#justifyCenter"),this.styler.justifyRight=t("#justifyRight"),this.styler.justifyFull=t("#justifyFull"),this.styler.addImage=t("#addImage")},e.prototype.initStylerActions=function(){var t=this;this.styler.formating.addEventListener("change",function(){var e=t.styler.formating;t.excute("formatblock",e[e.selectedIndex].value)}),this.styler.size.addEventListener("change",function(){var e=t.styler.size;t.excute("fontsize",e[e.selectedIndex].value)}),this.styler.color.addEventListener("input",function(){return t.excute("forecolor",t.styler.color.value)}),this.styler.bold.addEventListener("click",function(){return t.excute("bold")}),this.styler.italic.addEventListener("click",function(){return t.excute("italic")}),this.styler.underline.addEventListener("click",function(){return t.excute("underline")}),this.styler.justifyLeft.addEventListener("click",function(){return t.excute("justifyLeft")}),this.styler.justifyCenter.addEventListener("click",function(){return t.excute("justifyCenter")}),this.styler.justifyRight.addEventListener("click",function(){return t.excute("justifyRight")}),this.styler.justifyFull.addEventListener("click",function(){return t.excute("justifyFull")}),this.styler.addImage.addEventListener("change",function(){return t.insertImage()})},e.prototype.excute=function(t,e){document.execCommand(t,!1,e),this.el.focus(),this.updateStylerStates()},e.prototype.updateStylerStates=function(){var t=this;Object.keys(this.styler).forEach(function(e){document.queryCommandState(String(e))?t.styler[e].classList.add("is-active"):t.styler[e].classList.remove("is-active")})},e.prototype.getSelectedPosition=function(){return window.getSelection().getRangeAt(0)},e.prototype.updateStylerPositoin=function(){var t,e=this.getSelectedPosition(),n=document.createElement("sapn");e.insertNode(n),t=n.getBoundingClientRect(),n.parentNode.removeChild(n),this.styler.wrapper.style.top=t.top+window.scrollY-80+"px",this.styler.wrapper.style.left=t.left+"px"},e.prototype.insertImage=function(){var t=this.styler.addImage.files[0];if(t){var e,n=URL.createObjectURL(t),i=document.createElement("img");i.src=n,i.classList.add("editor-image"),e=this.getSelectedPosition(),e.insertNode(i)}},e});