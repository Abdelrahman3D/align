!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.Align=t()}(this,function(){"use strict";function e(e){return"string"==typeof e?document.querySelector(e):e}function t(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=void 0;return function(){var n=arguments,s=function(){i=null,t||e.apply(void 0,n)},o=t&&!i;i=requestAnimationFrame(s),o&&e.apply(void 0,arguments)}}function i(e,t,i){return Math.round(Math.max(Math.min(Number(e),i),t))}function n(){if("undefined"!=typeof window&&"undefined"!=typeof document){var e=navigator.appVersion;return-1!==e.indexOf("Win")?"Win":-1!==e.indexOf("Mac")?"Mac":-1!==e.indexOf("X11")?"UNIX":-1!==e.indexOf("Linux")?"Linux":"Other"}}function s(e){var t={};return Object.keys(e).forEach(function(i){var n=e[i];t[i]="object"===(void 0===n?"undefined":L(n))?s(n):n}),t}function o(e,t){for(;e!==document&&null!==e;){if(e===t)return!0;e=e.parentNode}return!1}function r(e){return e.charAt(0).toUpperCase()+e.slice(1)}function l(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"middle-left";if("function"==typeof e.getBoundingClientRect){var s=n.split("-"),o=t.getBoundingClientRect(),r=e.getBoundingClientRect(),l=i.getBoundingClientRect(),a={left:0,top:0};return s.forEach(function(e){switch(e){case"center":a.left=r.left-l.left+r.width/2;break;case"left":a.left=r.left-l.left;break;case"right":a.left=r.left-l.left-r.width;break;case"middle":a.top=r.top-l.top+r.height/2;break;case"top":a.top=r.top-l.top-o.height;break;case"bottom":a.top=l.top-r.bottom+o.height}}),t.style.left=a.left+"px",t.style.top=a.top+"px",a}}function a(e){e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen()}function c(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()}function u(e,t){var i="youtube"===t?/(?:youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/:"vimeo"===t?/vimeo.com\/(?:channels\/(?:\w+\/)?|groups\/(?:[^\/]*)\/videos\/|album\/(?:\d+)\/video\/|video\/|)(\d+)/:null;if(i){return e.match(i)[1]}}function d(e){return document.createRange().createContextualFragment(e).firstElementChild}function h(e,t,i){var n=e[t];return e[t]=e[i],e[i]=n,e}function v(e){return'\n    <svg class="icon" viewBox="0 0 24 24">\n      <path d="'+R[e]+'"/>\n    </svg>'}function m(e){F=e}function p(e,t){var i=document.createElement("button");return i.classList.add(F+"button"),i.id=e,t&&(i.dataset.tooltip=t),i.insertAdjacentHTML("afterbegin",v(e)),i}function f(e,t){var i=document.createElement("div"),n=document.createElement("select");return i.classList.add(F+"select"),n.id=e,t.forEach(function(t){var i=document.createElement("option");i.value=t,i.innerText=!1===t?e:t,n.appendChild(i)}),i.appendChild(n),i.insertAdjacentHTML("beforeend",'\n    <svg viewBox="0 0 24 24">\n      <polygon points="8,15 12,19 16,15 "/>\n      <polygon points="8,9 12,5 16,9 "/>\n    </svg>'),i}function g(e,t){var i=document.createElement("input");return i.classList.add(""+F+e),i.id=e,i.type=t,i}function b(e,t){var i=document.createElement("div"),n=document.createElement("input");return t&&(i.dataset.tooltip=t),i.classList.add(F+"button"),i.id=e,i.appendChild(n),i.insertAdjacentHTML("afterbegin",v(e)),n.classList.add(F+"input"),n.id=e,n.type="file",{input:n,el:i}}function y(e,t,i){var n=document.createElement("li"),s=p(e,i);return s.addEventListener("click",t),n.appendChild(s),n}var L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k=(function(){function e(e){this.value=e}function t(t){function i(e,t){return new Promise(function(i,s){var l={key:e,arg:t,resolve:i,reject:s,next:null};r?r=r.next=l:(o=r=l,n(e,t))})}function n(i,o){try{var r=t[i](o),l=r.value;l instanceof e?Promise.resolve(l.value).then(function(e){n("next",e)},function(e){n("throw",e)}):s(r.done?"return":"normal",r.value)}catch(e){s("throw",e)}}function s(e,t){switch(e){case"return":o.resolve({value:t,done:!0});break;case"throw":o.reject(t);break;default:o.resolve({value:t,done:!1})}o=o.next,o?n(o.key,o.arg):r=null}var o,r;this._invoke=i,"function"!=typeof t.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(t.prototype[Symbol.asyncIterator]=function(){return this}),t.prototype.next=function(e){return this._invoke("next",e)},t.prototype.throw=function(e){return this._invoke("throw",e)},t.prototype.return=function(e){return this._invoke("return",e)}}(),function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}),H=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),C=function(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)},V="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},M=function(e,t){return t={exports:{}},e(t,t.exports),t.exports}(function(e,t){!function(t,i){e.exports=function(){function e(){Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){var t=this;if(!document.documentElement.contains(t))return null;do{if(t.matches(e))return t;t=t.parentElement}while(null!==t);return null})}function t(e){return"string"==typeof e?document.querySelector(e):e}function i(e){"function"==typeof e&&e()}function n(e,t){for(var i=[],n=0;n<e;n++){var s="function"==typeof t?t():t;i.push(s)}return i}function s(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}function o(e,t){for(;e!==document&&null!==e;){if(e===t)return!0;e=e.parentNode}return!1}function r(e){return e>255?255:e<0?0:e}function l(e){return isNaN(Number(e))?"00":("0"+Number(e).toString(16)).slice(-2)}function a(e){return isNaN(parseInt(e,16))?"0":parseInt(e,16)}function c(){return"rgb("+s(0,255)+", "+s(0,255)+", "+s(0,255)+")"}function u(e){return e=e.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i),e&&4===e.length?"#"+("0"+parseInt(r(e[1]),10).toString(16)).slice(-2)+("0"+parseInt(r(e[2]),10).toString(16)).slice(-2)+("0"+parseInt(r(e[3]),10).toString(16)).slice(-2):""}function d(e){if((e=e.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&4===e.length){var t=e[1]/255,i=e[2]/255,n=e[3]/255,s=0,o=0,r=0,l=Math.min(t,i,n),a=Math.max(t,i,n);return r=(l+a)/2,l!==a&&(o=r>.5?(a-l)/(2-a-l):(a-l)/(a+l)),t>=a&&l!==a&&(s=(i-n)/(a-l)*60),i>=a&&l!==a&&(s=60*(2+(n-t)/(a-l))),n>=a&&l!==a&&(s=60*(4+(t-i)/(a-l))),s=s<0?parseInt(s+360):parseInt(s),o=parseInt(100*o),r=parseInt(100*r),"hsl("+s+", "+o+"%, "+r+"%)"}}function h(e,t){return{x:e*Math.cos(t*Math.PI*2),y:e*Math.sin(t*Math.PI*2)}}var v=("undefined"!=typeof window?window:void 0!==V||"undefined"!=typeof self&&self,function(e,t){return t={exports:{}},e(t,t.exports),t.exports}(function(e,t){!function(t,i){e.exports=function(){function e(e){return"string"==typeof e?document.querySelector(e):e}function t(e,t){return e?parseInt(e,10):parseInt(t,10)}function i(e,t){e.parentNode.insertBefore(t,e),t.appendChild(e)}var n=function(t,i){void 0===i&&(i={});var n=i.gradient;void 0===n&&(n=null);var s=i.classes;void 0===s&&(s=null);var o=i.colorCode;void 0===o&&(o=!1);var r=i.editable;void 0===r&&(r=!1);var l=i.reverse;void 0===l&&(l=!1);var a=i.label;void 0===a&&(a=!0);var c=i.min;void 0===c&&(c=0);var u=i.max;void 0===u&&(u=10);var d=i.step;void 0===d&&(d=1);var h=i.value;void 0===h&&(h=0),this.el=e(t),this.settings={gradient:n,classes:s,colorCode:o,editable:r,reverse:l,label:a,min:c,max:u,step:d,value:h},this.init()};return n.create=function(e,t){n(e,t)},n.prototype.init=function(){this.initElements(),this.min=t(this.el.min,this.settings.min),this.max=t(this.el.max,this.settings.max),this.step=t(this.el.step,this.settings.step),this.callbacks={},this.settings.gradient&&this.initGradient(),this.updateWidth(),this.update(t(this.el.value,this.settings.value)),this.initEvents()},n.prototype.initElements=function(){this.wrapper=document.createElement("div"),this.track=document.createElement("div"),this.handle=document.createElement("div"),this.fill=document.createElement("div"),this.wrapper.classList.add("slider"),this.settings.editable&&this.wrapper.classList.add("is-editable"),this.settings.reverse&&this.wrapper.classList.add("is-reverse"),this.settings.classes&&this.wrapper.classList.add(this.settings.classes),this.track.classList.add("slider-track"),this.handle.classList.add("slider-handle"),this.fill.classList.add("slider-fill"),this.el.classList.add("slider-input"),i(this.el,this.wrapper),this.track.appendChild(this.fill),this.track.appendChild(this.handle),this.wrapper.appendChild(this.track),this.settings.label&&(this.label=document.createElement("div"),this.label.classList.add("slider-label"),this.handle.appendChild(this.label))},n.prototype.initGradient=function(){if(this.settings.gradient.length>1)return this.track.style.backgroundImage="linear-gradient(90deg, "+this.settings.gradient+")",this.gradient=this.settings.gradient,void(this.colorCode=this.settings.colorCode);this.track.style.backgroundImage="none",this.track.style.backgroundColor=this.settings.gradient[0],this.handle.style.backgroundColor=this.settings.gradient[0],this.gradient=null},n.prototype.initEvents=function(){var e=this;this.track.addEventListener("mousedown",this.select.bind(this),!1),this.track.addEventListener("touchstart",this.select.bind(this),!1),this.settings.editable&&!this.settings.colorCode&&this.el.addEventListener("change",function(t){e.update(e.el.value)},!1)},n.prototype.select=function(e){e.preventDefault(),this.updateWidth(),this.click(e),this.callbacks.tempDrag=this.dragging.bind(this),this.callbacks.tempRelease=this.release.bind(this),document.addEventListener("mousemove",this.callbacks.tempDrag,!1),document.addEventListener("touchmove",this.callbacks.tempDrag,!1),document.addEventListener("touchend",this.callbacks.tempRelease,!1),document.addEventListener("mouseup",this.callbacks.tempRelease,!1)},n.prototype.dragging=function(e){e.preventDefault();var t="mousemove"===e.type?e.clientX:e.touches[0].clientX,i=t-this.currentX;if(1===e.buttons||"mousemove"!==e.type){this.track.classList.add("is-dragging");var n=parseInt(i/this.stepWidth+.5,10),s=parseInt((n+this.min)/this.step,10)*this.step;s!==this.currentValue&&this.update(s)}},n.prototype.release=function(){this.track.classList.remove("is-dragging"),document.removeEventListener("mousemove",this.callbacks.tempDrag),document.removeEventListener("touchmove",this.callbacks.tempDrag),document.removeEventListener("mouseup",this.callbacks.tempRelease),document.removeEventListener("touchend",this.callbacks.tempRelease)},n.prototype.click=function(e){e.preventDefault();var t="mousedown"===e.type?e.clientX:e.touches[0].clientX,i=t-this.currentX;if(1===e.buttons||"mousemove"!==e.type){var n=parseInt(i/this.stepWidth+.5,10),s=parseInt((n+this.min)/this.step,10)*this.step;s!==this.currentValue&&this.update(s)}},n.prototype.updateWidth=function(){this.currentX=this.track.getBoundingClientRect().left,this.width=this.track.clientWidth,this.stepWidth=this.width/(this.max-this.min)},n.prototype.getFillPercentage=function(e){return 100*(e-this.min)/(this.max-this.min)},n.prototype.normalizeValue=function(e){return e>=this.max?this.max:e<=this.min?this.min:isNaN(Number(e))?this.value:Number(e)},n.prototype.newGradient=function(e){this.settings.gradient=e,this.initGradient(),this.update(void 0,!0)},n.prototype.getHandleColor=function(e){for(var t=this,i=this.gradient.length-1,s=e/100,o=1;o<=i;o++)if(s>=(o-1)/i&&s<=o/i){var r=(s-(o-1)/i)/(1/i);return n.mixColors(t.gradient[o-1],t.gradient[o],r)}return"#000000"},n.prototype.update=function(e,t){if(void 0===t&&(t=!1),Number(e)!==this.value){var i=this.normalizeValue(e),n=this.getFillPercentage(i);if(this.handle.style.left=n+"%",this.fill.style.left=n+"%",this.value=i,this.el.value=this.value,this.settings.label&&(this.label.innerHTML=this.value),this.gradient){var s=this.getHandleColor(n);this.handle.style.backgroundColor=s,this.settings.colorCode&&(this.el.value=s,this.label.innerHTML=s)}t||(this.el.dispatchEvent(new Event("change")),this.el.dispatchEvent(new Event("input")))}},n.hexAverage=function(e,t,i){void 0===i&&(i=.5);var n=parseInt(e,16)*(1-i)+parseInt(t,16)*i;return("00"+Math.floor(n+.5).toString(16)).slice(-2)},n.mixColors=function(e,t,i){return e=e.replace("#",""),t=t.replace("#",""),"#"+(n.hexAverage(e.slice(0,-4),t.slice(0,-4),i)+n.hexAverage(e.slice(2,-2),t.slice(2,-2),i)+n.hexAverage(e.slice(-2),t.slice(-2),i)).toUpperCase()},n}()}()})),m=function(e,i){void 0===i&&(i={});var s=i.defaultColor;void 0===s&&(s=c());var o=i.radius;void 0===o&&(o=200);var r=i.mode;void 0===r&&(r="rgb");var l=i.events;void 0===l&&(l={});var a=i.recentColors;void 0===a&&(a=n(6,c));var u=i.disableLum;void 0===u&&(u=!1);var d=i.guideIcon;void 0===d&&(d='<svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="12"/></svg>'),this.el=t(e),this.options={defaultColor:s,radius:o,mode:r,events:l,recentColors:a,disableLum:u,guideIcon:d},this.init()};return m.prototype.init=function(){this.recentColors=this.options.recentColors,this.lastMove={x:0,y:0},this.isMenuActive=!1,e(),this._initElements(),this._initWheel(),this._initEvents(),this.selectColor(this.options.defaultColor,!0)},m.prototype._initElements=function(){var e=this;this.picker=document.createElement("div"),this.picker.insertAdjacentHTML("afterbegin",'\n      <button class="picker-guide">\n        '+this.options.guideIcon+'\n      </button>\n      <div class="picker-menu is-hidden" tabindex="-1">\n        <div class="picker-wheel">\n          <canvas class="picker-canvas"></canvas>\n          <div class="picker-cursor"></div>\n        </div>\n        '+(this.options.disableLum?"":'<input class="picker-saturation" type="number" min="0" max="100" value="100">')+'\n        <input id="red" type="number" min="0" max="255" value="0">\n        <input id="green" type="number" min="0" max="255" value="0">\n        <input id="blue" type="number" min="0" max="255" value="0">\n        <div class="picker-input">\n          <button class="picker-submit">\n            <svg class="icon" viewBox="0 0 24 24">\n              <path d="M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z"/>\n            </svg>\n          </button>\n        </div>\n        <div class="picker-recent"></div>\n      </div>\n    '),this.menu=this.picker.querySelector(".picker-menu"),this.recent=this.picker.querySelector(".picker-recent"),this.guide=this.picker.querySelector(".picker-guide"),this.canvas=this.picker.querySelector(".picker-canvas"),this.wheel=this.picker.querySelector(".picker-wheel"),this.submit=this.picker.querySelector(".picker-submit"),this.cursor=this.picker.querySelector(".picker-cursor"),this.saturation=this.picker.querySelector(".picker-saturation"),this.rgbSliders={red:this.picker.querySelector("#red"),green:this.picker.querySelector("#green"),blue:this.picker.querySelector("#blue")},this.el.parentNode.insertBefore(this.picker,this.el),this.el.classList.add("picker-value"),this.picker.classList.add("picker"),this.submit.parentNode.insertBefore(this.el,this.submit),this.guide.style.color=this.options.defaultColor,this.guide.style.fill=this.options.defaultColor,this.sliders={},this.options.disableLum||(this.sliders.saturation=new v(this.saturation,{gradient:["#FFFFFF","#000000"],label:!1})),Object.keys(this.rgbSliders).forEach(function(t){e.sliders[t]=new v(e.rgbSliders[t],{gradient:["#000000","#FFFFFF"],label:!1,editable:!0,reverse:!0})}),this.recentColors.forEach(function(t){var i=document.createElement("a");i.classList.add("picker-color"),i.style.backgroundColor=t,e.recent.appendChild(i),i.addEventListener("mousedown",function(e){return e.preventDefault()}),i.addEventListener("click",function(i){return e.selectColor(t)})})},m.prototype._initWheel=function(){this.canvas.width=this.options.radius,this.canvas.height=this.options.radius,this.context=this.canvas.getContext("2d"),this.circle={path:new Path2D,xCords:this.canvas.width/2,yCords:this.canvas.height/2,radius:this.canvas.width/2},this.circle.path.moveTo(this.circle.xCords,this.circle.yCords),this.circle.path.arc(this.circle.xCords,this.circle.yCords,this.circle.radius,0,360),this.circle.path.closePath(),this.updateWheelColors()},m.prototype._initEvents=function(){var e=this;this.events=[new Event("input"),new Event("change")],this.guide.addEventListener("click",function(){i(e.options.events.beforerOpen),e.togglePicker()}),this.menu.addEventListener("mousedown",function(t){if(t.target===e.menu&&0===t.button){var i={},n={},s={};t.preventDefault(),i.x=t.clientX,i.y=t.clientY;var o=function(t){n.x=t.clientX,n.y=t.clientY,s.x=e.lastMove.x+n.x-i.x,s.y=e.lastMove.y+n.y-i.y,e.menu.style.transform="translate("+s.x+"px, "+s.y+"px)"},r=function t(){e.lastMove=s,document.removeEventListener("mousemove",o),document.removeEventListener("mouseup",t)};document.addEventListener("mousemove",o),document.addEventListener("mouseup",r)}}),this.wheel.addEventListener("mousedown",function(t){t.preventDefault();var i=function(t){var i=e.getMouseCords(t);if(e.context.isPointInPath(e.circle.path,i.x,i.y)){var n=e.getColorFromWheel(i);return e.selectColor(n,!1,i),n}return e.el.value},n=function t(n){var s=i(n);s!==e.el.value&&(e.updateRecentColors(s),e.selectColor(s,!1,e.mouse)),document.removeEventListener("mousemove",i),document.removeEventListener("mouseup",t)};document.addEventListener("mousemove",i),document.addEventListener("mouseup",n)}),this.options.disableLum||this.saturation.addEventListener("change",function(){e.updateWheelColors()}),Object.keys(this.rgbSliders).forEach(function(t){e.rgbSliders[t].addEventListener("change",function(t){var i=e.getColorFromSliders();e.selectColor(i)})}),this.el.addEventListener("focus",function(t){var i=function(){e.selectColor(e.el.value,!0)},n=function t(){e.el.removeEventListener("change",i),e.el.removeEventListener("blur",t)};e.el.addEventListener("change",i),e.el.addEventListener("blur",n)}),this.submit.addEventListener("click",function(t){i(e.options.events.beforeSubmit),e.selectColor(e.el.value),e.closePicker(),i(e.options.events.afterSubmit)})},m.prototype.updateWheelColors=function(){var e=this,t=this.circle.xCords,i=this.circle.yCords,n=this.circle.radius;this.context.clearRect(0,0,this.canvas.width,this.canvas.height);for(var s=0;s<360;s+=1){var o=e.context.createRadialGradient(t,i,0,t,i,n),r=(s-2)*Math.PI/180,l=(s+2)*Math.PI/180;e.context.beginPath(),e.context.moveTo(t,i),e.context.arc(t,i,n,r,l),e.context.closePath(),o.addColorStop(0,"hsl("+s+", "+(e.options.disableLum?100:e.saturation.value)+"%, 100%)"),o.addColorStop(.5,"hsl("+s+", "+(e.options.disableLum?100:e.saturation.value)+"%, 50%)"),o.addColorStop(1,"hsl("+s+", "+(e.options.disableLum?100:e.saturation.value)+"%, 0%)"),e.context.fillStyle=o,e.context.fill()}},m.prototype.updateRecentColors=function(e){var t=this;this.recentColors.length>=6&&this.recentColors.shift(),e&&this.recentColors.push(e),this.recent.childNodes.length>=6&&this.recent.removeChild(this.recent.firstChild);var i=document.createElement("a");i.classList.add("picker-color"),i.style.backgroundColor=e,this.recent.appendChild(i),i.addEventListener("click",function(i){i.preventDefault(),t.selectColor(e)})},m.prototype.updateSlidersInputs=function(e){var t=l(this.rgbSliders.red.value),i=l(this.rgbSliders.green.value),n=l(this.rgbSliders.blue.value);this.sliders.red.newGradient(["#00"+i+n,"#ff"+i+n]),this.sliders.green.newGradient(["#"+t+"00"+n,"#"+t+"ff"+n]),this.sliders.blue.newGradient(["#"+t+i+"00","#"+t+i+"ff"])},m.prototype.updateCursor=function(e){var t=this.getColorFromSliders(),i=u(t),n=d(t),s=n.match(/^hsl?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)\%[\s+]?,[\s+]?(\d+)\%[\s+]?/i),o=(100-s[3])*(this.options.radius/200),r=h(o,s[1]/360),l=this.options.radius/2;if(this.options.disableLum||(this.sliders.saturation.update(s[2]),this.sliders.saturation.newGradient(["#FFFFFF",i])),this.cursor.style.backgroundColor=n,e)return void(this.cursor.style.transform="translate("+e.x+"px, "+e.y+"px)");this.cursor.style.transform="translate("+(r.x+l)+"px, "+(r.y+l)+"px)"},m.prototype.selectColor=function(e,t,n){var s=this;if(void 0===t&&(t=!1),"#"===e.slice(0,1)||"RGB"===e.slice(0,3).toUpperCase()||"HSL"===e.slice(0,3).toUpperCase()){i(this.options.events.beforeSelect);var o="#"===e.slice(0,1)?e:u(e),r=d(e);this.el.value="hex"===this.options.mode?o:"hsl"===this.options.mode?r:e,this.guide.style.color=e,this.guide.style.fill=e,this.sliders.red.update(a(o.slice(1,3)),!0),this.sliders.green.update(a(o.slice(3,5)),!0),this.sliders.blue.update(a(o.slice(5,7)),!0),this.updateSlidersInputs(),this.updateCursor(n),i(this.options.events.afterSelect),t||this.events.forEach(function(e){return s.el.dispatchEvent(e)})}},m.prototype.getColorFromSliders=function(){return"rgb("+this.rgbSliders.red.value+", "+this.rgbSliders.green.value+", "+this.rgbSliders.blue.value+")"},m.prototype.getColorFromWheel=function(e){var t=this.context.getImageData(e.x,e.y,1,1).data;return"rgb("+t[0]+", "+t[1]+", "+t[2]+")"},m.prototype.getMouseCords=function(e){var t=this.canvas.getBoundingClientRect(),i={x:e.clientX-t.left,y:e.clientY-t.top};return this.mouse=i,i},m.prototype.togglePicker=function(){if(this.isMenuActive)return void this.closePicker();this.openPiker()},m.prototype.closePicker=function(){this.menu.classList.add("is-hidden"),this.isMenuActive=!1,document.removeEventListener("click",this.documentCallback)},m.prototype.openPiker=function(){var e=this;this.menu.classList.remove("is-hidden"),this.isMenuActive=!0;var t=function(t){if(!o(t.target,e.menu)&&!o(t.target,e.guide))return void e.closePicker();i(e.options.events.clicked)};this.documentCallback=t.bind(this),document.addEventListener("click",this.documentCallback),i(this.options.events.afterOpen)},m}()}()}),E=null,x=null,S=null,w=function(){function e(){k(this,e)}return H(e,null,[{key:"selectTextRange",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.textRange;if(t){var i=e.current=window.getSelection();i.removeAllRanges(),i.addRange(t)}}},{key:"selectElement",value:function(t){if(t){var i=document.createRange();i.selectNodeContents(t);var n=e.current=window.getSelection();n.removeAllRanges(),n.addRange(i)}}},{key:"updateSelectedRange",value:function(){var t=e.current=window.getSelection();t.rangeCount&&3===t.anchorNode.nodeType&&(e.textRange=t.getRangeAt(0)),t.rangeCount&&(e.range=t.getRangeAt(0))}},{key:"textRange",set:function(e){e&&(x=e)},get:function(){return x}},{key:"range",set:function(e){e&&(S=e)},get:function(){return S}},{key:"current",set:function(e){E=e},get:function(){return E}}]),e}(),z=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=n.position,o=void 0===s?{left:0,top:0}:s,r=n.inputsCount,l=void 0===r?1:r,a=n.inputsPlaceholders,c=void 0===a?[]:a;k(this,e),this.settings={position:o,inputsCount:l,inputsPlaceholders:c},this._init(t,i)}return H(e,[{key:"_init",value:function(e,t){var i=this,n=this.settings.position;this.el=document.createElement("div"),this.message=document.createElement("label"),this.submit=document.createElement("button"),this.inputs=[],this.el.classList.add("prompt"),this.message.classList.add("prompt-message"),this.submit.classList.add("prompt-submit"),this.el.style.left=n.left+"px",this.el.style.top=n.top+"px",this.message.innerText=e,this.submit.innerText="Submit",this.el.appendChild(this.message);for(var s=0;s<this.settings.inputsCount;s++)this.inputs[s]=document.createElement("input"),this.inputs[s].classList.add("prompt-input"),this.settings.inputsPlaceholders[s]&&(this.inputs[s].placeholder=this.settings.inputsPlaceholders[s]),this.el.appendChild(this.inputs[s]);this.inputs[0].value=t,this.el.appendChild(this.submit),document.body.appendChild(this.el),setTimeout(function(){document.addEventListener("click",function(e){o(e.target,i.el)||i.remove()})},16)}},{key:"onSubmit",value:function(e,t){var i=this;return this.submit.addEventListener("click",function(){return e.call(i,t)}),this.submit.addEventListener("click",function(){return setTimeout(i.remove.bind(i),16)}),this}},{key:"remove",value:function(){this.el.remove()}}]),e}(),A=function(){var e=n();return{cmdKey:"Mac"===e?"⌘":"Ctrl",shift:"Mac"===e?"⇧":"Shift",ctrl:"Mac"===e?"⌃":"Ctrl",alt:"Mac"===e?"⌥":"Alt",tab:"Mac"===e?"⇥":"Tab"}}(),I={bold:{element:"button",command:"bold",tooltip:"Bold ("+A.cmdKey+" B)"},italic:{element:"button",command:"italic",tooltip:"Italic ("+A.cmdKey+" I)"},underline:{element:"button",command:"underline",tooltip:"Underline ("+A.cmdKey+" U)"},strikeThrough:{element:"button",command:"strikeThrough",tooltip:"Strike through"},undo:{element:"button",command:"undo",tooltip:"Undo ("+A.cmdKey+" Z)"},redo:{element:"button",command:"redo",tooltip:"Redo ("+A.cmdKey+" "+A.shift+" Z)"},removeFormat:{element:"button",command:"removeFormat",tooltip:"Remove format ("+A.cmdKey+" \\)"},justifyLeft:{element:"button",command:"justifyLeft",tooltip:"Align left ("+A.cmdKey+" L)"},justifyCenter:{element:"button",command:"justifyCenter",tooltip:"Align center ("+A.cmdKey+" E)"},justifyRight:{element:"button",command:"justifyRight",tooltip:"Align right ("+A.cmdKey+" R)"},selectContent:{element:"button",tooltip:"Select all content ("+A.cmdKey+" "+A.shift+" A)",func:function(e){w.selectElement(e.$align.editor)}},justifyFull:{element:"button",command:"justifyFull",tooltip:"Justify full ("+A.cmdKey+" J)"},createLink:{element:"button",tooltip:"Hyperlink",func:function(e){new z("Enter link:",w.current.toString(),{position:w.textRange.getBoundingClientRect()}).onSubmit(function(){var t=this.input.value;t&&(w.selectTextRange(),e.$align.execute("createLink",t))},[e])}},h1:{element:"button",command:"formatblock",value:"h1",tooltip:"Heading 1"},h2:{element:"button",command:"formatblock",value:"h2",tooltip:"Heading 2"},h3:{element:"button",command:"formatblock",value:"h3",tooltip:"Heading 3"},h4:{element:"button",command:"formatblock",value:"h4",tooltip:"Heading 4"},blockquote:{element:"button",command:"formatblock",value:"blockquote",tooltip:"Quote"},p:{element:"button",command:"formatblock",value:"p",tooltip:"Paragraph"},orderedList:{element:"button",command:"insertOrderedList",tooltip:"Ordered list"},unorderedList:{element:"button",command:"insertUnorderedList",tooltip:"Unordered list"},insertLine:{element:"button",command:"insertHorizontalRule",useCSS:!0,tooltip:"Insert line"},indent:{element:"button",command:"indent",useCSS:!0,tooltip:"Indent ("+A.tab+")"},outdent:{element:"button",command:"outdent",useCSS:!0,tooltip:"Outdent ("+A.shift+" "+A.tab+")"},superscript:{element:"button",command:"superscript",tooltip:"Superscript ("+A.cmdKey+" "+A.shift+" =)"},subscript:{element:"button",command:"subscript",tooltip:"Subscript ("+A.cmdKey+" =)"},pre:{element:"button",command:"formatblock",value:"pre",func:"highlight",tooltip:"Script"},fontSize:{element:"select",command:"fontSize"},fontName:{element:"select",init:"applyFont",command:"fontName",useCSS:!0},separator:{element:"styling",class:"styler-separator"},fullscreen:{element:"button",func:"toggleFullScreen",tooltip:"Fullscreen ("+A.cmdKey+" "+A.shift+" F)"},color:{element:"input",type:"text",command:"foreColor",tooltip:"Font color",useCSS:!0,init:M,initConfig:{defaultColor:"#000000",mode:"hex",disableLum:!0,guideIcon:'\n        <svg viewBox="0 0 24 24">\n          <path d="M0 20h24v4H0z"/>\n          <path style="fill: currentColor" d="M11 3L5.5 17h2.25l1.12-3h6.25l1.12 3h2.25L13 3h-2zm-1.38 9L12 5.67 14.38 12H9.62z"/>\n        </svg>\n      ',events:{beforeSubmit:function(){w.selectTextRange()},afterOpen:function(){w.updateSelectedRange()},afterSelect:function(){w.updateSelectedRange()}}}},backColor:{element:"input",type:"text",command:"backColor",tooltip:"Hightlight color",useCSS:!0,init:M,initConfig:{defaultColor:"#fdfdfd",mode:"hex",disableLum:!0,guideIcon:'\n        <svg viewBox="0 0 24 24">\n          <path style="fill: currentColor" d="M16.56 8.94L7.62 0 6.21 1.41l2.38 2.38-5.15 5.15c-.59.59-.59 1.54 0 2.12l5.5 5.5c.29.29.68.44 1.06.44s.77-.15 1.06-.44l5.5-5.5c.59-.58.59-1.53 0-2.12zM5.21 10L10 5.21 14.79 10H5.21zM19 11.5s-2 2.17-2 3.5c0 1.1.9 2 2 2s2-.9 2-2c0-1.33-2-3.5-2-3.5z"/>\n          <path d="M0 20h24v4H0z"/>\n        </svg>\n      ',events:{beforeSubmit:function(){w.selectTextRange()},afterOpen:function(){w.updateSelectedRange()},afterSelect:function(){w.updateSelectedRange()}}}},_figureClasses:{element:"classes",command:"figure"},_sectionClasses:{element:"classes",command:"section"},_sectionToggleHTML:{element:"button",func:"toggleHTML",tooltip:"Edit as HTMl"},_remove:{element:"button",func:"remove",tooltip:"Remove section"},_sectionUp:{element:"button",func:"moveUp",tooltip:"Move section up"},_sectionDown:{element:"button",func:"moveDown",tooltip:"Move section down"},_sectionImage:{element:"file",func:"backgroundImage",tooltip:"Add background image"},_sectionVideo:{element:"file",func:"backgroundVideo",tooltip:"Add background video"},_sectionColor:{element:"input",type:"text",func:"backgroundColor",tooltip:"Change background color",init:M,initConfig:{defaultColor:"#000000",mode:"hex",disableLum:!0,guideIcon:'\n        <svg viewBox="0 0 24 24">\n          <path d="M0 20h24v4H0z"/>\n          <path style="fill: #fff" d="M17.5,12A1.5,1.5 0 0,1 16,10.5A1.5,1.5 0 0,1 17.5,9A1.5,1.5 0 0,1 19,10.5A1.5,1.5 0 0,1 17.5,12M14.5,8A1.5,1.5 0 0,1 13,6.5A1.5,1.5 0 0,1 14.5,5A1.5,1.5 0 0,1 16,6.5A1.5,1.5 0 0,1 14.5,8M9.5,8A1.5,1.5 0 0,1 8,6.5A1.5,1.5 0 0,1 9.5,5A1.5,1.5 0 0,1 11,6.5A1.5,1.5 0 0,1 9.5,8M6.5,12A1.5,1.5 0 0,1 5,10.5A1.5,1.5 0 0,1 6.5,9A1.5,1.5 0 0,1 8,10.5A1.5,1.5 0 0,1 6.5,12M12,3A9,9 0 0,0 3,12A9,9 0 0,0 12,21A1.5,1.5 0 0,0 13.5,19.5C13.5,19.11 13.35,18.76 13.11,18.5C12.88,18.23 12.73,17.88 12.73,17.5A1.5,1.5 0 0,1 14.23,16H16A5,5 0 0,0 21,11C21,6.58 16.97,3 12,3Z"/>\n        </svg>\n      '}}},R={blockquote:"M6 17h3l2-4V7H5v6h3zm8 0h3l2-4V7h-6v6h3z",bold:"M15.6 10.79c.97-.67 1.65-1.77 1.65-2.79 0-2.26-1.75-4-4-4H7v14h7.04c2.09 0 3.71-1.7 3.71-3.79 0-1.52-.86-2.82-2.15-3.42zM10 6.5h3c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5h-3v-3zm3.5 9H10v-3h3.5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5z",fontSize:"M9 4v3h5v12h3V7h5V4H9zm-6 8h3v7h3v-7h3V9H3v3z",h1:"M3,4H5V10H9V4H11V18H9V12H5V18H3V4M14,18V16H16V6.31L13.5,7.75V5.44L16,4H18V16H20V18H14Z",h2:"M3,4H5V10H9V4H11V18H9V12H5V18H3V4M21,18H15A2,2 0 0,1 13,16C13,15.47 13.2,15 13.54,14.64L18.41,9.41C18.78,9.05 19,8.55 19,8A2,2 0 0,0 17,6A2,2 0 0,0 15,8H13A4,4 0 0,1 17,4A4,4 0 0,1 21,8C21,9.1 20.55,10.1 19.83,10.83L15,16H21V18Z",h3:"M3,4H5V10H9V4H11V18H9V12H5V18H3V4M15,4H19A2,2 0 0,1 21,6V16A2,2 0 0,1 19,18H15A2,2 0 0,1 13,16V15H15V16H19V12H15V10H19V6H15V7H13V6A2,2 0 0,1 15,4Z",h4:"M3,4H5V10H9V4H11V18H9V12H5V18H3V4M18,18V13H13V11L18,4H20V11H21V13H20V18H18M18,11V7.42L15.45,11H18Z",html:"M19 12h-2v3h-3v2h5v-5zM7 9h3V7H5v5h2V9zm14-6H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16.01H3V4.99h18v14.02z",image:"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z",italic:"M10 4v3h2.21l-3.42 8H6v3h8v-3h-2.21l3.42-8H18V4z",justifyCenter:"M7 15v2h10v-2H7zm-4 6h18v-2H3v2zm0-8h18v-2H3v2zm4-6v2h10V7H7zM3 3v2h18V3H3z",
justifyFull:"M3 21h18v-2H3v2zm0-4h18v-2H3v2zm0-4h18v-2H3v2zm0-4h18V7H3v2zm0-6v2h18V3H3z",justifyLeft:"M15 15H3v2h12v-2zm0-8H3v2h12V7zM3 13h18v-2H3v2zm0 8h18v-2H3v2zM3 3v2h18V3H3z",justifyRight:"M3 21h18v-2H3v2zm6-4h12v-2H9v2zm-6-4h18v-2H3v2zm6-4h12V7H9v2zM3 3v2h18V3H3z",p:"M13,4A4,4 0 0,1 17,8A4,4 0 0,1 13,12H11V18H9V4H13M13,10A2,2 0 0,0 15,8A2,2 0 0,0 13,6H11V10H13Z",pre:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z",removeFormat:"M15 16h4v2h-4zm0-8h7v2h-7zm0 4h6v2h-6zM3 18c0 1.1.9 2 2 2h6c1.1 0 2-.9 2-2V8H3v10zM14 5h-3l-1-1H6L5 5H2v2h12z",strikeThrough:"M7.24 8.75c-.26-.48-.39-1.03-.39-1.67 0-.61.13-1.16.4-1.67.26-.5.63-.93 1.11-1.29.48-.35 1.05-.63 1.7-.83.66-.19 1.39-.29 2.18-.29.81 0 1.54.11 2.21.34.66.22 1.23.54 1.69.94.47.4.83.88 1.08 1.43.25.55.38 1.15.38 1.81h-3.01c0-.31-.05-.59-.15-.85-.09-.27-.24-.49-.44-.68-.2-.19-.45-.33-.75-.44-.3-.1-.66-.16-1.06-.16-.39 0-.74.04-1.03.13-.29.09-.53.21-.72.36-.19.16-.34.34-.44.55-.1.21-.15.43-.15.66 0 .48.25.88.74 1.21.38.25.77.48 1.41.7H7.39c-.05-.08-.11-.17-.15-.25zM21 12v-2H3v2h9.62c.18.07.4.14.55.2.37.17.66.34.87.51.21.17.35.36.43.57.07.2.11.43.11.69 0 .23-.05.45-.14.66-.09.2-.23.38-.42.53-.19.15-.42.26-.71.35-.29.08-.63.13-1.01.13-.43 0-.83-.04-1.18-.13s-.66-.23-.91-.42c-.25-.19-.45-.44-.59-.75-.14-.31-.25-.76-.25-1.21H6.4c0 .55.08 1.13.24 1.58.16.45.37.85.65 1.21.28.35.6.66.98.92.37.26.78.48 1.22.65.44.17.9.3 1.38.39.48.08.96.13 1.44.13.8 0 1.53-.09 2.18-.28s1.21-.45 1.67-.79c.46-.34.82-.77 1.07-1.27s.38-1.07.38-1.71c0-.6-.1-1.14-.31-1.61-.05-.11-.11-.23-.17-.33H21z",text:"M5 17v2h14v-2H5zm4.5-4.2h5l.9 2.2h2.1L12.75 4h-1.5L6.5 15h2.1l.9-2.2zM12 5.98L13.87 11h-3.74L12 5.98z",underline:"M12 17c3.31 0 6-2.69 6-6V3h-2.5v8c0 1.93-1.57 3.5-3.5 3.5S8.5 12.93 8.5 11V3H6v8c0 3.31 2.69 6 6 6zm-7 2v2h14v-2H5z",insertColumn:"M13 12h7v1.5h-7zm0-2.5h7V11h-7zm0 5h7V16h-7zM21 4H3c-1.1 0-2 .9-2 2v13c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 15h-9V6h9v13z",unorderedList:"M4 10.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zm0-6c-.83 0-1.5.67-1.5 1.5S3.17 7.5 4 7.5 5.5 6.83 5.5 6 4.83 4.5 4 4.5zm0 12c-.83 0-1.5.68-1.5 1.5s.68 1.5 1.5 1.5 1.5-.68 1.5-1.5-.67-1.5-1.5-1.5zM7 19h14v-2H7v2zm0-6h14v-2H7v2zm0-8v2h14V5H7z",orderedList:"M2 17h2v.5H3v1h1v.5H2v1h3v-4H2v1zm1-9h1V4H2v1h1v3zm-1 3h1.8L2 13.1v.9h3v-1H3.2L5 10.9V10H2v1zm5-6v2h14V5H7zm0 14h14v-2H7v2zm0-6h14v-2H7v2z",indent:"M3 21h18v-2H3v2zM3 8v8l4-4-4-4zm8 9h10v-2H11v2zM3 3v2h18V3H3zm8 6h10V7H11v2zm0 4h10v-2H11v2z",outdent:"M11 17h10v-2H11v2zm-8-5l4 4V8l-4 4zm0 9h18v-2H3v2zM3 3v2h18V3H3zm8 6h10V7H11v2zm0 4h10v-2H11v2z",superscript:"M16 18.6L14.6 20 9 14.4 3.4 20 2 18.6 7.6 13 2 7.4 3.4 6 9 11.6 14.6 6 16 7.4 10.4 13l5.6 5.6zm2.3-14.2c0-.2.1-.4.1-.6.1-.2.2-.3.3-.4.1-.1.3-.2.4-.3.2-.1.4-.1.5-.1.2 0 .3 0 .4.1.1.1.3.1.3.2.1.1.2.2.2.4.1.1.1.3.1.5s-.1.4-.2.6c-.1.2-.2.3-.4.5-.2.1-.4.3-.6.4-.2.1-.5.3-.7.4-.2.1-.5.3-.7.4s-.2.3-.4.5-.3.3-.4.5c-.1.2-.2.4-.2.7V9h5V8h-3.8c.1-.2.3-.4.5-.6.3-.2.6-.4.8-.6s.6-.4.9-.5c.3-.2.6-.4.8-.6s.4-.5.6-.7c.1-.3.2-.6.2-.9 0-.3 0-.5-.1-.8s-.2-.5-.4-.7c-.2-.2-.4-.3-.7-.5-.4 0-.7-.1-1.2-.1-.4 0-.7.1-1 .2s-.6.3-.8.5c-.2.2-.4.5-.5.8-.2.2-.3.5-.3.9h1.3z",subscript:"M16 16.6L14.6 18 9 12.4 3.4 18 2 16.6 7.6 11 2 5.4 3.4 4 9 9.6 14.6 4 16 5.4 10.4 11l5.6 5.6zm2.3.8c0-.2.1-.4.1-.6.1-.2.2-.3.3-.4.1-.1.3-.2.4-.3s.3-.1.5-.1.3 0 .4.1c.1.1.3.1.3.2.1.1.2.2.2.4s.1.3.1.5-.1.4-.2.6c-.1.2-.2.3-.4.5-.2.1-.4.3-.6.4-.2.1-.5.3-.7.4-.2.1-.5.3-.7.4s-.4.3-.6.5c-.2.2-.3.3-.4.5-.1.2-.2.4-.2.6v.9h5v-1H18c.1-.2.3-.4.5-.6.2-.2.5-.4.8-.5s.6-.4.9-.5c.3-.2.6-.4.8-.6s.4-.5.6-.7c.2-.3.2-.6.2-.9 0-.3 0-.5-.1-.8s-.2-.5-.4-.7c-.2-.2-.4-.3-.7-.5-.3-.1-.7-.2-1.1-.2-.4 0-.7.1-1 .2-.3.1-.6.3-.8.5-.2.2-.4.5-.5.8-.1.3-.2.6-.3 1h1.4z",createLink:"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z",selectContent:"M19.51 3.08L3.08 19.51c.09.34.27.65.51.9.25.24.56.42.9.51L20.93 4.49c-.19-.69-.73-1.23-1.42-1.41zM11.88 3L3 11.88v2.83L14.71 3h-2.83zM5 3c-1.1 0-2 .9-2 2v2l4-4H5zm14 18c.55 0 1.05-.22 1.41-.59.37-.36.59-.86.59-1.41v-2l-4 4h2zm-9.71 0h2.83L21 12.12V9.29L9.29 21z",insertLine:"M4 19h6v-2H4v2zM20 5H4v2h16V5zm-3 6H4v2h13.25c1.1 0 2 .9 2 2s-.9 2-2 2H15v-2l-3 3 3 3v-2h2c2.21 0 4-1.79 4-4s-1.79-4-4-4z",undo:"M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z",redo:"M18.4 10.6C16.55 8.99 14.15 8 11.5 8c-4.65 0-8.58 3.03-9.96 7.22L3.9 16c1.05-3.19 4.05-5.5 7.6-5.5 1.95 0 3.73.72 5.12 1.88L13 16h9V7l-3.6 3.6z",plus:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z",figure:"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z",figureFloatRight:"M15,7H21V13H15V7M3,3H21V5H3V3M13,7V9H3V7H13M9,11V13H3V11H9M3,15H17V17H3V15M3,19H21V21H3V19Z",figureCenter:"M9,7H15V13H9V7M3,3H21V5H3V3M3,15H21V17H3V15M3,19H17V21H3V19Z",figureFloatLeft:"M3,7H9V13H3V7M3,3H21V5H3V3M21,7V9H11V7H21M21,11V13H11V11H21M3,15H17V17H3V15M3,19H21V21H3V19Z",figureFull:"M23 18V6c0-1.1-.9-2-2-2H3c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2zM8.5 12.5l2.5 3.01L14.5 11l4.5 6H5l3.5-4.5z",table:"M4,3H20A2,2 0 0,1 22,5V20A2,2 0 0,1 20,22H4A2,2 0 0,1 2,20V5A2,2 0 0,1 4,3M4,7V10H8V7H4M10,7V10H14V7H10M20,10V7H16V10H20M4,12V15H8V12H4M4,20H8V17H4V20M10,12V15H14V12H10M10,20H14V17H10V20M20,20V17H16V20H20M20,12H16V15H20V12Z",sectionNormal:"M12.5,19.5V3.47H14.53V19.5H12.5M9.5,19.5V3.47H11.53V19.5H9.5M4.5,7.5L8.53,11.5L4.5,15.47V12.47H1.5V10.5H4.5V7.5M19.5,15.47L15.5,11.5L19.5,7.5V10.5H22.5V12.47H19.5V15.47Z",sectionFull:"M9,11H15V8L19,12L15,16V13H9V16L5,12L9,8V11M2,20V4H4V20H2M20,20V4H22V20H20Z",section:"M2 21h19v-3H2v3zM20 8H3c-.55 0-1 .45-1 1v6c0 .55.45 1 1 1h17c.55 0 1-.45 1-1V9c0-.55-.45-1-1-1zM2 3v3h19V3H2z",fullscreen:"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z",video:"M17,10.5V7A1,1 0 0,0 16,6H4A1,1 0 0,0 3,7V17A1,1 0 0,0 4,18H16A1,1 0 0,0 17,17V13.5L21,17.5V6.5L17,10.5Z",delete:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zm2.46-7.12l1.41-1.41L12 12.59l2.12-2.12 1.41 1.41L13.41 14l2.12 2.12-1.41 1.41L12 15.41l-2.12 2.12-1.41-1.41L10.59 14l-2.13-2.12zM15.5 4l-1-1h-5l-1 1H5v2h14V4z",facebook:"M5,3H19A2,2 0 0,1 21,5V19A2,2 0 0,1 19,21H5A2,2 0 0,1 3,19V5A2,2 0 0,1 5,3M18,5H15.5A3.5,3.5 0 0,0 12,8.5V11H10V14H12V21H15V14H18V11H15V9A1,1 0 0,1 16,8H18V5Z",twitter:'"M5,3H19A2,2 0 0,1 21,5V19A2,2 0 0,1 19,21H5A2,2 0 0,1 3,19V5A2,2 0 0,1 5,3M17.71,9.33C18.19,8.93 18.75,8.45 19,7.92C18.59,8.13 18.1,8.26 17.56,8.33C18.06,7.97 18.47,7.5 18.68,6.86C18.16,7.14 17.63,7.38 16.97,7.5C15.42,5.63 11.71,7.15 12.37,9.95C9.76,9.79 8.17,8.61 6.85,7.16C6.1,8.38 6.75,10.23 7.64,10.74C7.18,10.71 6.83,10.57 6.5,10.41C6.54,11.95 7.39,12.69 8.58,13.09C8.22,13.16 7.82,13.18 7.44,13.12C7.81,14.19 8.58,14.86 9.9,15C9,15.76 7.34,16.29 6,16.08C7.15,16.81 8.46,17.39 10.28,17.31C14.69,17.11 17.64,13.95 17.71,9.33Z',embed:"M12.89,3L14.85,3.4L11.11,21L9.15,20.6L12.89,3M19.59,12L16,8.41V5.58L22.42,12L16,18.41V15.58L19.59,12M1.58,12L8,5.58V8.41L4.41,12L8,15.58V18.41L1.58,12",_remove:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zm2.46-7.12l1.41-1.41L12 12.59l2.12-2.12 1.41 1.41L13.41 14l2.12 2.12-1.41 1.41L12 15.41l-2.12 2.12-1.41-1.41L10.59 14l-2.13-2.12zM15.5 4l-1-1h-5l-1 1H5v2h14V4z",_sectionUp:"M7.41,15.41L12,10.83L16.59,15.41L18,14L12,8L6,14L7.41,15.41Z",_sectionDown:"M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z",_sectionImage:"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z",_sectionVideo:"M17,10.5V7A1,1 0 0,0 16,6H4A1,1 0 0,0 3,7V17A1,1 0 0,0 4,18H16A1,1 0 0,0 17,17V13.5L21,17.5V6.5L17,10.5Z",_sectionToggleHTML:"M14.6,16.6L19.2,12L14.6,7.4L16,6L22,12L16,18L14.6,16.6M9.4,16.6L4.8,12L9.4,7.4L8,6L2,12L8,18L9.4,16.6Z"},F="",T=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=i.mode,s=void 0===n?"default":n,o=i.commands,r=void 0===o?["bold","italic","underline"]:o,l=i.hideWhenClickOut,a=void 0!==l&&l,c=i.tooltip,u=void 0!==c&&c,d=i.theme,h=void 0===d?"light":d;k(this,e),this.$align=t,this.settings={mode:s,commands:r,hideWhenClickOut:a,tooltip:u,theme:h},this._init()}return H(e,[{key:"_init",value:function(){var e=this;m("styler-"),this.cmdsSchema=s(I),this.styler=document.createElement("ul"),this.styler.classList.add("styler","is-"+this.settings.mode,"is-"+this.settings.theme),this.cmds={},this.visiable=!1,this.settings.commands.forEach(function(t){e.generateCmdElement(t)}),this.$align.el.appendChild(this.styler),"bubble"===this.settings.mode&&this._initBubble()}},{key:"_initBubble",value:function(){this.styler.classList.add("is-hidden"),this.bubbleScrollCallback=t(this.updateBubblePosition.bind(this))}},{key:"generateCmdElement",value:function(e){var t=this,i=document.createElement("li"),n="string"==typeof e?e:Object.keys(e)[0],s=this.cmdsSchema[n];if(!s)return void console.warn(n+" is not found");var o=this.cmds[n]={schema:s};switch(s.element){case"button":o.el=p(n,this.getTooltip(s)),o.el.addEventListener("click",function(){return t.cmdCallback(s,s.value)}),i.appendChild(o.el);break;case"classes":o.el=document.createElement("ul"),e[n].forEach(function(i){var l=y(""+s.command+r(i),function(){t.toggleClass("is-"+i,e[n])},r(s.command)+" "+i);o.el.appendChild(l)}),i.appendChild(o.el);break;case"file":var l=b(n,this.getTooltip(s));o.el=l.input,o.el.addEventListener("change",function(e){t.cmdCallback(s,e)}),i.appendChild(l.el);break;case"select":var a=f(n,e[n]),c=o.el=a.querySelector("select");c.addEventListener("change",function(){return t.cmdCallback(s,c[c.selectedIndex].value)}),i.appendChild(a);break;case"input":o.el=g(n,s.type,this.getTooltip(s)),o.el.addEventListener("change",function(){t.cmdCallback(s,o.el.value)}),i.appendChild(o.el);break;case"styling":i.classList.add(s.class);break;case"custom":var u=s.create(this);i.appendChild(u);break;default:console.warn(n+" element not found")}"function"==typeof s.init&&(s.init=new s.init(o.el,s.initConfig)),"string"==typeof s.init&&(this.$align[s.init](s,e),s.init=null),this.styler.appendChild(i)}},{key:"cmdCallback",value:function(e,t){if(e.command&&this.execute(e.command,t,e.useCSS),"string"==typeof e.func){(this.$align[e.func]||this.currentItem[e.func].bind(this.currentItem))(this,t)}"function"==typeof e.func&&e.func(this,t),"bubble"===this.settings.mode&&this.updateBubblePosition()}},{key:"execute",value:function(e,t){var i;(i=this.$align).execute.apply(i,arguments)}},{key:"updateBubblePosition",value:function(){if(w.textRange||this.currentItem){var e=this.currentItem?this.currentItem.el:w.textRange,t=e.getBoundingClientRect(),n=this.$align.el.getBoundingClientRect(),s=this.styler.getBoundingClientRect(),o=t.top-s.height-10,r=t.left+(t.width-s.width)/2,l=n.left,a=n.left+n.width-s.width,c=i(r,l,a),u=o<70?t.top+t.height+10:o;if(u<70)return void(this.styler.style.opacity=0);this.styler.style.opacity=1,this.styler.style.top=u+"px",this.styler.style.left=c+"px"}}},{key:"show",value:function(e){var t=this;this.currentItem&&this.currentItem.el.classList.remove("is-active"),e&&(this.currentItem=e,this.currentContent=e.contentDiv,this.currentItem.el.classList.add("is-active")),"bubble"===this.settings.mode&&this.updateBubblePosition(),this.visiable||(this.visiable=!0,this.styler.classList.add("is-visible"),this.styler.classList.remove("is-hidden"),"bubble"===this.settings.mode&&window.addEventListener("scroll",this.bubbleScrollCallback),this.settings.hideWhenClickOut&&document.addEventListener("click",function(e){o(e.target,t.currentItem.el)||o(e.target,t.styler)||t.hide()}))}},{key:"hide",value:function(){this.currentItem&&this.currentItem.el.classList.remove("is-active"),this.styler.classList.remove("is-visible"),this.styler.classList.add("is-hidden"),this.visiable=!1,"bubble"===this.settings.mode&&window.removeEventListener("scroll",this.bubbleScrollCallback),this.settings.hideWhenClickOut&&document.removeEventListener("click",this.clickCallback)}},{key:"update",value:function(){if(this.updateCommandsStates(),"bubble"===this.settings.mode&&w.textRange)return w.textRange.collapsed||w.range.collapsed?void this.hide():void this.show()}},{key:"getTooltip",value:function(e){return!(!e.tooltip||!this.settings.tooltip)&&(this.$align.settings.shortcuts?e.tooltip:e.tooltip.replace(/(\([^)]+\))/g,""))}},{key:"updateCommandsStates",value:function(){var e=this;Object.keys(this.cmds).forEach(function(t){var i=e.cmds[t],n=i.schema.command,s=i.schema.value,o=i.schema.init;if(n){if(document.queryCommandState(n))return void i.el.classList.add("is-active");if(document.queryCommandValue(n)===s)return void i.el.classList.add("is-active");if(o)return void(w.range===w.textRange&&o.selectColor(document.queryCommandValue(n),!0));document.queryCommandValue(n)&&(i.el.value=document.queryCommandValue(n)),i.el.classList.remove("is-active")}})}},{key:"toggleClass",value:function(e,t){var i;if(this.currentItem){var n=t.map(function(e){return"is-"+e});(i=this.currentItem.el.classList).remove.apply(i,C(n)),this.currentItem.el.classList.toggle(e),"bubble"===this.settings.mode&&this.updateBubblePosition()}}}]),e}(),B=0,D=[],N=function(){function e(t,i){var n=this,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text";if(k(this,e),!t||"BR"!==t.nodeName){if(this.id=B++,this.type=s,this.generateEl(t),"text"===s&&this.el.addEventListener("click",function(){e.$align.activeSection=n.el,e.$optionsBar.show(n)}),"object"===(void 0===i?"undefined":L(i)))return void e.$align.editor.insertBefore(this.el,i);e.$align.editor.appendChild(this.el),D.push(this)}}return H(e,[{key:"generateEl",value:function(e){switch(this.el=e&&"DIV"===e.nodeName?e:document.createElement("div"),this.el.classList.add("align-section"),this.type){case"text":this.contentDiv=this.el.querySelector(".align-content")||document.createElement("div"),this.contentDiv.classList.add("align-content"),this.contentDiv.contentEditable=!0,e=e?this.contentDiv.innerHTML||this.el.innerHTML||e.outerHTML:"<p></p>",this.el.innerHTML="",this.el.appendChild(this.contentDiv),this.contentDiv.innerHTML=e,this.generateAddSectionButton(),this.el.insertAdjacentElement("afterBegin",this.addSectionButton);break;case"title":this.titleDiv=this.el.querySelector(".align-title")||document.createElement("div"),this.titleDiv.classList.add("align-title"),this.titleDiv.contentEditable=!0,this.title=document.createElement("h1"),this.title.innerHTML=e,this.titleDiv.appendChild(this.title),this.el.appendChild(this.titleDiv)}}},{key:"generateAddSectionButton",value:function(){var t=this;return this.addSectionButton=document.createElement("button"),this.addSectionButton.classList.add("align-newSection"),this.addSectionButton.addEventListener("click",function(){return new e("",t.el)}),this.addSectionButton.contentEditable=!1,this.addSectionButton}},{key:"getIndex",value:function(){var e=this;return D.findIndex(function(t){return t===e})}},{key:"toggleHTML",value:function(){if("PRE"!==this.contentDiv.firstElementChild.tagName){var t=document.createTextNode(this.contentDiv.innerHTML),i=document.createElement("pre");return this.contentDiv.innerHTML="",i.id="content",i.style.whiteSpace="pre-wrap",i.appendChild(t),this.contentDiv.appendChild(i),void e.$align.highlight()}this.contentDiv.innerHTML=this.contentDiv.innerText,this.contentDiv.contentEditable=!0,this.contentDiv.focus()}},{key:"backgroundColor",value:function(e,t){this.el.style.backgroundColor=t}},{key:"backgroundImage",value:function(t,i){var n=this,s=i.target,o=s.files[0];if(o){var r=new FileReader,l=this.el.querySelector(".align-bgImage")||document.createElement("div");this.el.querySelector(".align-bgImage")||(l.classList.add("align-bgImage"),this.el.insertAdjacentElement("afterBegin",l)),r.addEventListener("load",function(){n.el.classList.add("is-bgImage"),l.style.backgroundImage="url("+r.result+")";var t=function(e){l.style.backgroundImage="url("+e+")"};e.$align.update(),e.$align.$bus.emit("imageAdded",{file:o,update:t})}),r.readAsDataURL(o),s.value=null}}},{key:"backgroundVideo",value:function(t,i){var n=i.target,s=n.files[0];if(s){var o=this.el.querySelector(".align-bgVideo"),r=null,l=URL.createObjectURL(i.target.files[0]);if(!o){var a=d('<video autoplay muted loop class="align-bgVideo"></video>');r=document.createElement("source"),a.appendChild(r),this.el.insertAdjacentElement("afterBegin",a)}o&&(r=o.querySelector("source")),this.el.classList.add("is-bgVideo"),r.src=l;var c=function(e){r.src=e};e.$align.update(),e.$align.$bus.emit("videoAdded",{file:s,update:c}),n.value=null}}},{key:"moveUp",value:function(){var t=this.getIndex();this.el.previousSibling&&"title"!==D[t-1].type&&(e.$align.editor.insertBefore(this.el,D[t-1].el),h(D,t,t-1))}},{key:"moveDown",value:function(){var t=this.getIndex();this.el.nextSibling&&(e.$align.editor.insertBefore(this.el,D[t+1].el.nextSibling),h(D,t,t+1))}},{key:"active",value:function(){e.$optionsBar.show(this),this.el.focus()}},{key:"remove",value:function(){this.el.remove(),D.splice(this.getIndex(),1)}},{key:"content",get:function(){var e=void 0;if("text"===this.type){e=this.el.cloneNode(!0);var t=e.querySelector(".align-newSection"),i=e.querySelector(".align-content");e.insertAdjacentHTML("beforeend",i.innerHTML),i.remove(),t.remove()}return"title"===this.type?this.title.innerText:e.outerHTML}}],[{key:"config",value:function(e,t){var i=Object.assign({mode:"bubble",hideWhenClickOut:!0,commands:["_sectionUp","_sectionDown","_sectionColor","_sectionImage","_sectionVideo","_sectionToggleHTML",{_sectionClasses:["normal","full"]},"_remove"],tooltip:!0,theme:"dark"},t);this.$align=e,this.$optionsBar=new T(e,i)}},{key:"allSections",get:function(){return D}}]),e}(),_=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=i.theme,s=void 0===n?"light":n,o=i.items,r=void 0===o?["figure","video","facebook","table","embed"]:o;k(this,e),this.$align=t,this.settings={theme:s,items:r},this._init()}return H(e,[{key:"_init",value:function(){var e=this;m("creator-"),this.creator=document.createElement("div"),this.creator.classList.add("creator","is-hidden",this.settings.theme),this.menu=document.createElement("ul"),this.menu.classList.add("creator-menu"),this.toggleButton=p("plus"),this.toggleButton.addEventListener("click",this.toggleState.bind(this)),this.optionsBar=new T(this.$align,{mode:"bubble",hideWhenClickOut:!0,commands:[{_figureClasses:["floatLeft","center","floatRight","full"]},"_remove"],tooltip:!1,theme:"dark"}),this.settings.items.forEach(function(t){var i=document.createElement("li"),n=null;switch(t){case"figure":var s=b("figure");s.input.addEventListener("change",e.createFigure.bind(e)),n=s.el;break;case"video":n=p("video"),n.addEventListener("click",e.createVideo.bind(e));break;case"table":n=p("table"),n.addEventListener("click",e.createTable.bind(e));break;case"facebook":n=p("facebook"),n.addEventListener("click",e.embedPost.bind(e));break;case"embed":n=p("embed"),n.addEventListener("click",e.embed.bind(e));break;default:return}i.appendChild(n),e.menu.appendChild(i)}),this.creator.appendChild(this.toggleButton),this.creator.appendChild(this.menu),this.$align.el.appendChild(this.creator)}},{key:"update",value:function(){if(w.current.isCollapsed&&1===w.current.anchorNode.nodeType&&w.current.anchorNode.childNodes.length<=1&&w.current.anchorNode.parentNode.classList.contains("align-content"))return this.position=l(w.current.anchorNode,this.creator,this.$align.el,"middle-left"),void this.show();this.hide()}},{key:"toggleState",value:function(){this.creator.classList.toggle("is-active")}},{key:"show",value:function(){this.creator.classList.contains("is-visible")||(this.creator.classList.add("is-visible"),this.creator.classList.remove("is-hidden"))}},{key:"hide",value:function(){this.creator.classList.remove("is-visible"),this.creator.classList.remove("is-active"),this.creator.classList.add("is-hidden")}},{key:"createFigure",value:function(e){var t=this,i=e.target,n=i.files[0];if(n&&w.range){var s=new FileReader,o=document.createElement("figure"),r=document.createElement("figcaption"),l=document.createElement("img"),a=w.current.anchorNode;o.contentEditable=!1,r.contentEditable=!0,r.dataset.defaultValue="Figure caption",l.classList.add("align-image"),o.classList.add("align-figure","is-center"),o.appendChild(l),o.appendChild(r),o.addEventListener("click",function(){return t.optionsBar.show({el:o,remove:function(){o.remove()}})},!1),s.addEventListener("load",function(){l.src=s.result,l.dataset.alignFilename=n.name,t.$align.update();var e=function(e){l.src=e};t.$align.$bus.emit("imageAdded",{file:n,update:e})}),s.readAsDataURL(n),i.value=null,a.parentNode.insertBefore(o,a)}}},{key:"createVideo",value:function(){var e=w.current.anchorNode;new z("Enter video link:","",{position:this.position}).onSubmit(function(){var t=this.inputs[0].value;if(console.log(t),t){var i=t.includes("yout")?"youtube":t.includes("vimeo")?"vimeo":"";if(i){var n=u(t,i),s=document.createElement("iframe");s.width=560,s.height=315,s.allowfullscreen=!0,s.contentEditable=!1,s.src="youtube"===i?"//www.youtube.com/embed/"+n:"vimeo"===i?"//player.vimeo.com/video/"+n:"",e.parentNode.insertBefore(s,e)}}})}},{key:"createTable",value:function(){var e=w.current.anchorNode;new z("Enter post link:","",{position:this.position,inputsCount:2,inputsPlaceholders:["rows","columns"]}).onSubmit(function(){var t=Number(this.inputs[0].value),i=Number(this.inputs[1].value);if(!isNaN(t)&&!isNaN(i)){var n=document.createElement("table");n.classList.add("align-table"),n.insertAdjacentHTML("afterbegin",("\n        <tr>\n          "+"<td><br></td>".repeat(i)+"\n        </tr>\n      ").repeat(t)),e.parentNode.insertBefore(n,e)}})}},{key:"embedPost",value:function(){var e=w.current.anchorNode;new z("Enter post link:","",{position:this.position}).onSubmit(function(){var t=this.inputs[0].value;if(t){var i=document.createElement("iframe");i.width=500,i.height=200,i.scrolling="no",i.contentEditable=!1,i.allowTransparency=!0,i.src="//www.facebook.com/plugins/post.php?href="+t,e.parentNode.insertBefore(i,e)}})}},{key:"embed",value:function(){var e=w.current.anchorNode;new z("Add embeded:","",{position:this.position}).onSubmit(function(){var t=this.inputs[0].value;if(t){var i=document.createElement("div");e.parentNode.insertBefore(i,e),i.insertAdjacentHTML("afterbegin",t)}})}},{key:"embedTweet",value:function(){}}]),e}(),q=function(){function e(){k(this,e),this.events={}}return H(e,[{key:"on",value:function(e,t){var i=this;this.events[e]||(this.events[e]=[]);var n=this.events[e].length;return this.events[e].push(t),function(){i.events[e].splice(n,1)}}},{key:"once",value:function(e,t){var i=this,n=this.events.eventName?this.events[e].length:0,s=function(){t.apply(void 0,arguments),i.events[e].splice(n,1)};this.on(e,s)}},{key:"emit",value:function(e,t){var i=this;this.events[e]&&this.events[e].length&&setTimeout(function(){i.events[e].forEach(function(e){return e(t)})},0)}}]),e}();return function(){function t(i){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=n.toolbar,o=void 0===s?null:s,r=n.bubble,l=void 0===r?null:r,a=n.creator,c=void 0===a?null:a,u=n.section,d=void 0===u?null:u,h=n.shortcuts,v=void 0!==h&&h,m=n.postTitle,p=void 0!==m&&m;k(this,t),this.el=e(i),this.settings={toolbar:o,bubble:l,creator:c,section:d,shortcuts:v,postTitle:p},this._init()}return H(t,[{key:"_init",value:function(){this.$bus=new q,this.startContent=Array.from(this.el.children),this.el.innerText="",this.settings.toolbar&&(this.settings.toolbar.mode="toolbar",this.toolbar=new T(this,this.settings.toolbar)),this.settings.bubble&&(this.settings.bubble.mode="bubble",this.settings.bubble.tooltip=!1,this.bubble=new T(this,this.settings.bubble)),this.settings.creator&&(this.creator=new _(this,this.settings.creator)),this._initEditor(),this._initSections(),this._initEvents()}},{key:"_initEditor",value:function(){document.execCommand("defaultParagraphSeparator",!1,"p"),this.editor=document.createElement("div"),this.editor.classList.add("align-editor"),this.cmdKey="Mac"===n()?"metaKey":"ctrlKey",this.cmdKeyPressed=!1,this.el.appendChild(this.editor),this.editor.focus(),w.updateSelectedRange()}},{key:"_initSections",value:function(){var e=this;this.activeSection="",N.config(this,this.settings.section),!1!==this.settings.postTitle&&(this.postTitle=new N(this.settings.postTitle,"","title")),this.startContent.forEach(function(e){return new N(e)}),this.newSectionButton=document.createElement("button"),this.newSectionButton.classList.add("align-addButton"),this.el.appendChild(this.newSectionButton),this.newSectionButton.addEventListener("click",function(){var t=new N;t.active(),w.selectElement(t.contentDiv.querySelector("p")),e.update()})}},{key:"_initEvents",value:function(){var e=this;this.editor.addEventListener("focus",function(){e.highlight()}),this.editor.addEventListener("mouseup",this.update.bind(this),!0),window.addEventListener("keydown",function(t){if(!t.defaultPrevented){if(e.update(),t[e.cmdKey]&&e.settings.shortcuts)switch(t.key.toUpperCase()){case"B":t.preventDefault(),e.execute("bold");break;case"I":t.preventDefault(),e.execute("italic");break;case"U":t.preventDefault(),e.execute("underline");break;case"E":t.preventDefault(),e.execute("justifyCenter");break;case"R":t.preventDefault(),e.execute("justifyRight");break;case"L":t.preventDefault(),e.execute("justifyLeft");break;case"J":t.preventDefault(),e.execute("justifyFull");break;case"A":t.shiftKey&&(t.preventDefault(),w.selectElement(e.editor));break;case"F":t.preventDefault(),t.shiftKey&&e.toggleFullScreen();break;case"Z":if(t.preventDefault(),t.shiftKey){e.execute("redo");break}e.execute("undo");break;case"\\":t.preventDefault(),e.execute("removeFormat");break;case"=":if(t.preventDefault(),t.shiftKey){e.execute("superscript");break}e.execute("subscript")}switch(t.key){case"Tab":if(t.preventDefault(),t.shiftKey){e.execute("outdent",!1,!0);break}e.execute("indent",!1,!0);break;case"Escape":e.el.classList.remove("is-fullscreen"),c()}}},!0)}},{key:"highlight",value:function(){if("undefined"!=typeof hljs){Array.from(this.editor.querySelectorAll("pre")).forEach(function(e){hljs.highlightBlock(e)})}}},{key:"toggleFullScreen",value:function(){if(!document.fullscreenElement&&!document.webkitIsFullScreen)return a(this.el),void this.el.classList.add("is-fullscreen");this.el.classList.remove("is-fullscreen"),c()}},{key:"update",value:function(){var e=this;w.updateSelectedRange(),setTimeout(function(){e.settings.toolbar&&e.toolbar.update(),e.settings.bubble&&e.bubble.update(),e.settings.creator&&e.creator.update()},16)}},{key:"applyFont",value:function(e,t){this.el.style.fontFamily=t.fontName[0]}},{key:"execute",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.editor.focus(),document.execCommand("styleWithCSS",!1,i),document.execCommand(e,!1,t),document.execCommand("styleWithCSS",!1,!1),this.update()}},{key:"content",get:function(){return N.allSections.reduce(function(e,t){return"text"!==t.type?e:e+=t.content},"")}},{key:"title",get:function(){if(this.postTitle){return N.allSections.find(function(e){return"title"===e.type}).content}}}],[{key:"extend",value:function(e,t){I[e]=t}},{key:"extendIcons",value:function(e,t){v[e]=t}}]),t}()});